# UNO 游戏开发需求与规则文档

## 1. 项目概述

* **游戏名称：** UNO-RL
* **开发环境：** Python 3.x / Pygame 库
* **基本目标：** 实现 2-4 人（玩家 vs AI）的卡牌对战，率先出完手牌者获胜。

---

## 2. 卡牌定义 (Card Mechanics)

全副牌共 **108 张**，建议在代码中定义为对象或字典。

### A. 数字牌 (76 张)

* **颜色：** 红、黄、蓝、绿 (各 19 张)
* **数值：**  0 (每色 1 张)， 1 - 9 (每色 2 张)

### B. 功能牌 (24 张)

* **Skip (跳过)：** 下一位玩家停止出牌一次。
* **Reverse (反转)：** 改变出牌方向（2 人局时等同于 Skip）。
* **Draw Two (+2)：** 下一位玩家摸 2 张牌并停止出牌一次。

### C. 万用牌 (8 张)

* **Wild (变色)：** 玩家可指定下一轮的颜色。
* **Wild Draw Four (+4)：** 玩家指定颜色，且下一位玩家摸 4 张牌并停止出牌一次。

---

## 3. 核心游戏流程

### 3.1 初始化 (Setup)

1. **洗牌：** 随机打乱 108 张牌。
2. **发牌：** 每位玩家初始分配 **7 张** 牌。
3. **起始：** 从抽牌堆顶翻开一张作为弃牌堆的起始牌（若起始牌为 +4，则需放回重抽）。

### 3.2 回合逻辑 (Turn Logic)

玩家必须打出与弃牌堆顶端牌 **颜色相同** 或 **数字/功能相同** 的牌。

* **合法出牌：** 牌进入弃牌堆，触发对应的特殊功能。
* **无法出牌：** 从抽牌堆摸一张牌。如果摸到的牌合法，可以立即打出，否则换下一位。
* **喊出 UNO：** 当手牌剩余 1 张时，必须触发 "喊叫" 动作。若未喊叫且被对手发现，罚摸 2 张。

### 3.3 胜负规则

* **胜利条件：** 某位玩家手牌清空。

---

## 4. 程序架构设计参考

### 4.1 类结构建议

| 类名 | 职责描述 |
| --- | --- |
| `Card` | 存储颜色、类型、数值；负责绘制卡牌 UI。 |
| `Deck` | 管理抽牌堆和弃牌堆（洗牌、发牌、重置）。 |
| `Player` | 存储手牌、玩家 ID、是否为 AI、喊 UNO 状态。 |
| `GameManager` | 核心逻辑：管理回合顺序、判定合法性、处理功能牌特效。 |

### 4.2 坐标与 UI 布局

* **屏幕中心：** 放置弃牌堆（显示当前顶牌）和抽牌堆（背面朝上）。
* **屏幕下方：** 玩家手牌区（可交互）。
* **屏幕上方/侧边：** AI 玩家信息（隐藏手牌内容，仅显示张数）。
* **提示信息：** 当前颜色状态、出牌方向箭头、玩家提示语。

---

## 5. 开发路线图 (Roadmap)

1. **Phase 1:** 基础类设计，实现 108 张牌的生成与洗牌。
2. **Phase 2:** 渲染静态 UI，将手牌显示在屏幕上。
3. **Phase 3:** 实现基础出牌逻辑（同色/同数检测）。
4. **Phase 4:** 编写功能牌逻辑（+2, +4, 反转等）及 AI 简单逻辑。
5. **Phase 5:** 加入动画效果（平滑移动卡牌）与音效。
