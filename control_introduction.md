# UNO 控制操作与逻辑说明

本游戏不仅包含 UNO 的基础规则引擎，还构建了一个包含人类玩家、规则型AI和强化学习AI的混合对战环境。本文档详细介绍了各个角色的行为逻辑以及人类玩家的操作指南。

## 1. 玩家角色与逻辑 (Player Logic)

在本演示环境中，您将与两个不同逻辑的 AI 对手进行博弈：

### 1.1 Alice (HumanBack) - 人类玩家
*   **控制者**: 您 (用户)。
*   **逻辑**: 完全由终端输入控制。您可以查看到详尽的牌面信息，并做出包括出牌、抓牌、诈唬（打出+4）、质疑等所有决策。操作详情请见后文的“操作指南”。

### 1.2 Charlie (Simple AI) - 简单规则脚本
*   **角色定位**: 基准测试对手，代表最基础的游戏逻辑。
*   **出牌逻辑**: "有牌必出"。
    *   它会扫描手牌，一旦发现**第一张**符合规则的牌，就会立即打出。
    *   如果不幸没有牌可出，它会自动抓牌。如果抓到的牌能出，会立即打出。
*   **策略特征**:
    *   **颜色偏好**: 极其单纯，当打出万能牌 (Wild) 时，它总是选择 **红色 (Red)**。
    *   **毫无保留**: 不会为了战术保留功能牌。
    *   **+4 应对**: 面对 +4 攻击时，有 30% 的概率会发起“质疑”，无论结果如何。

### 1.3 Bob (RL Agent) - 强化学习智能体
*   **角色定位**: 进阶对手，使用深度学习模型进行决策。
*   **决策逻辑**:
    *   **状态感知**: 它能“看到”场上的局势（如当前颜色、对手手牌数量、已出过的牌等），并将其编码为向量。
    *   **模型推演**: 通过神经网络计算每个可能动作（出哪张牌、是否跳过）的“预期回报值 (Q-value)”。
    *   **动态策略**: 同样是面对万能牌，它可能会根据场况选择红、黄、蓝、绿任一颜色，以最大化获胜概率。
    *   *注：在训练初期，它的表现可能接近随机；随着训练迭代，它会学会更复杂的策略。*

---

## 2. 界面概览
游戏界面以表格形式实时显示当前局势。每一行代表一名玩家的状态：
*   **Name**: 玩家名称。
*   **Action**: 玩家上一步执行的行动（如打出的牌、抓牌、被跳过）。
*   **Hand**: 玩家当前手牌数量。
*   **Color**: 当前场上的有效颜色（Red, Blue, Green, Yellow）。

**颜色编码说明**：
*   **红色/绿色/黄色/蓝色文字**: 对应游戏中的四种颜色。
*   **橙色 (Drawing)**: 表示玩家进行了抓牌操作。
*   **棕色 (Skipped)**: 表示玩家被跳过。

---

## 3. 人类玩家操作指南 (HumanBack)
当轮到你行动时，程序会暂停并等待你的输入。

### 3.1 查看手牌与可用牌
系统会以表格外的文本形式列出信息：
1.  **[Hand Cards]**: 你手中所有的牌。
2.  **[Available Cards]**: 根据当前规则，你**现在可以打出**的牌。

示例：
```text
[Hand Cards]{Red 7, Blue Skip, Wild}
[Available Cards]{0. Skip, 1. Red 7, 2. Wild}
Input:
```

### 3.2 自主决策
在 `Input:` 提示符后输入对应数字：

*   **输入 `0`**: **抓牌 (Skip and Draw)**
    *   这是一种战术选择。即使你有牌可出，你也可以选择不暴露手牌，而是去抓一张牌。
    *   **抓牌后决策**:
        *   系统会自动抓一张牌。
        *   如果这张新牌**能用**，系统会追问：
            `[Use?]{1. Yes, 2. No}`
            *   输入 `1`: 立即打出这张新牌。
            *   输入 `2`: 将新牌收入手牌，回合结束。
        *   如果新牌**不能用**，回合自动结束。

*   **输入 `1` 及以上数字**: **出牌**
    *   直接打出列表中对应编号的牌。
    *   例如上例中，输入 `1` 将打出 "Red 7"。

### 3.3 万能牌选色
如果你打出了 **Wild** 或 **Wild Draw Four (+4)**，你需要指定后续的颜色。
系统提示：
```text
[Choose Color]{1. Red, 2. Blue, 3. Green, 4. Yellow}
Input:
```
输入 `1`-`4` 之间的数字来选择你想要的颜色。

---

## 4. 被动交互 (对手的回合)
当对手行动时，你可能需要根据情况做出反应。

### 4.1 质疑 +4 (Challenge Wild Draw Four)
当有人对你打出 **+4 (Wild Draw Four)** 时，根据 UNO 规则，如果他手中有与此前弃牌堆颜色相同的牌，他是不允许打出 +4 的（除非为了诈唬）。
你可以选择是否**质疑 (Challenge)** 他的行为：

```text
[Challenge +4?]{1. Yes, 2. No}
Input:
```

*   **输入 `1` (Yes)**: **质疑**。
    *   如果**成功**（他诈唬了）：他被罚抓 4 张牌。你可以正常出牌。
    *   如果**失败**（他确实没别的牌出）：你不仅要抓原本的 4 张，还要额外罚抓 2 张（共 6 张），且你的回合被跳过。
*   **输入 `2` (No)**: **不质疑**。
    *   你接受命运，抓 4 张牌并跳过回合。

---

## 5. 常见问题 (FAQ)
*   **Q: 为什么对于我的输入，系统提示 [Illegal Input]?**
    *   请确保输入的是纯数字，且在选项范围内。不要输入标点符号或字母。
*   **Q: 为什么我有牌出，却还要提供跳过的选择 `0`？**
    *   这通常是为了保留强力牌（如 +4 或 Wild）到关键时刻，或者是为了不想改变当前的颜色。
*   **Q: 为什么 Simple AI 显得很愚蠢？**
    *   它是最简单的逻辑机器人，被编程得很简单。这使得它的行为可预测，适合用于强化学习智能体的早期训练。

---
*祝你在 UNO 世界中玩得愉快！*
